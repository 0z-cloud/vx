function f(target_url,win_name){var new_win;window.open(target_url,win_name,"resizable=yes,scrollbars=yes,menubar=no,toolbar=no,width=550,height=280,top=0,left=0").focus()}function conv(id){var conv_win;window.open("converter.php?id="+id,"convert_"+id,"resizable=yes,scrollbars=yes,menubar=no,toolbar=no,width=600,height=400,top=0,left=0").focus()}var AjaxSettings={timeout:5e3};$(document).ready(function(){$.ajaxSetup(AjaxSettings);var DontCreateCompactIDs=!1,MsgCont=$("#msgCont");MsgCont.on("mouseover",".hov",function(){if(!0!==$(this).data("hasTip")){var ThisChild=$(this).children("*").attr("class");"convert"==ThisChild?$(this).tipTip({delay:0,edgeOffset:8,content:JS_Lang.mess_convert_title}):"delete"==ThisChild?$(this).tipTip({delay:0,edgeOffset:8,content:JS_Lang.mess_delete_single_title}):"reply"==ThisChild?$(this).tipTip({delay:0,edgeOffset:8,content:JS_Lang.mess_reply_title}):"reply2"==ThisChild?$(this).tipTip({delay:0,edgeOffset:8,content:JS_Lang.mess_replyally_title}):"ignore"==ThisChild?$(this).tipTip({delay:0,edgeOffset:8,content:JS_Lang.mess_ignore_title}):"report"==ThisChild?$(this).tipTip({delay:0,edgeOffset:8,content:JS_Lang.mess_report_e_title}):"report2"==ThisChild&&$(this).tipTip({delay:0,edgeOffset:8,maxWidth:"300px",content:JS_Lang.mess_report_title}),$(this).data("hasTip",!0).trigger("mouseover")}}),$(".selectAll").tipTip({delay:0,content:JS_Lang.mess_selectall_title,edgeOffset:10}),MsgCont.on("click",".hov",function(){$(this).children("*").get(0).click()}),$(".selectAll").click(function(){var isChecked=$(this).is(":checked");$(".eMark > input").attr("checked",isChecked),$(".selectAll").attr("checked",isChecked)}),MsgCont.on("click",".eMark > input",function(){if($(this).is(":checked")){var AllChecked=!0;$(".eMark > input").each(function(){if(!$(this).is(":checked"))return AllChecked=!1,!1}),AllChecked&&$(".selectAll").attr("checked",!0)}else $(".selectAll").attr("checked",!1)}),MsgCont.on("click",".convert",function(){var GetID;return conv($(this).attr("id").replace("cv_","")),!1}),MsgCont.on("click",".delete",function(){DontCreateCompactIDs=!0;var ThisID=$(this).parents("tr").prev("tr").find('input[type="checkbox"]').attr("name").replace("del","");return $("#delid").val(ThisID),$('[name^="del"]:not([name="delid"]), [name^="sm"], [name="time"]',$("#msg_form")).attr("name",""),$("#msg_form").submit(),!1}),$(".spySim").click(function(){return $("#"+$(this).attr("id").replace("spy_","")).submit(),!1}),$(".SpyExpand").click(function(){"images/collapse.png"==$(this).children("img").attr("src")?($(this).parents(".msgrow").find(".sth:not(.nohide)").hide(0),$(this).children("img").attr("src","images/expand.png")):($(this).parents(".msgrow").find(".sth:not(.nohide)").show(0),$(this).children("img").attr("src","images/collapse.png"))}),$(".thAct").click(function(){if(!0!==$(this).data("isLocked")){var ThisID=$(this).attr("id").replace("thAct_",""),ThisEl=$(this);ThisEl.data("isLocked",!0),!0!==ThisEl.data("expanded")?ThisEl.children(".epd").hide(0,function(){if(!0!==ThisEl.data("loaded")){ThisEl.children(".load").length<=0&&ThisEl.append(DynamicCode.loading),ThisEl.children(".load").show(0);var ThisGetData=ThisEl.attr("class").replace("thAct ","").split(" "),Excludes=ThisGetData[0].replace("exc_",""),MaxID=ThisGetData[1].replace("mid_",""),HasCat=ThisGetData[2].replace("c_",""),NoCat=0;""!=Excludes?Excludes.split("_").join(","):Excludes="",100==HasCat&&(NoCat=1),$.get("ajax/messages.conversation.php",{tid:ThisID,exc:Excludes,mid:MaxID,nc:NoCat}).complete(function(getResponse,getStatus){var ErrorOccured=!1;if("success"==getStatus){var ParseResponse=$.parseJSON(getResponse.responseText);void 0===ParseResponse.Err?($("#thID_"+ThisID).html(DynamicCode.sBR+ParseResponse.Code+DynamicCode.sBR).show(250),ThisEl.data("loaded",!0),ThisEl.append(DynamicCode.collapse),ThisEl.children(".load").hide(0,function(){ThisEl.children(".cpe").show(0,function(){ThisEl.data("expanded",!0),ThisEl.data("isLocked",!1)})})):ErrorOccured=!0}"success"==getStatus&&!0!==ErrorOccured||ThisEl.children(".load").hide(0,function(){ThisEl.children(".therr").length<=0&&ThisEl.append(DynamicCode.error),ThisEl.children(".therr").show(0),setTimeout(function(){ThisEl.children(".therr").animate({opacity:1e-4},250,function(){$(this).css({opacity:1}).hide(0),ThisEl.children(".epd").show(0).css({opacity:1e-4}).animate({opacity:1},250,function(){ThisEl.data("isLocked",!1)})})},1500)})})}else $("#thID_"+ThisID).show(250),ThisEl.children(".cpe").show(0,function(){ThisEl.data("expanded",!0),ThisEl.data("isLocked",!1)})}):($("#thID_"+ThisID).hide(250),ThisEl.children(".cpe").hide(0,function(){ThisEl.children(".epd").show(0,function(){ThisEl.data("expanded",!1),ThisEl.data("isLocked",!1)})}))}}),$(".delMsgSel").change(function(){$(".delMsgSel").val($(this).val())}),$("#msg_form").submit(function(){var Return=!0,Command=$("[name=deletemessages]").val(),GetID,GetThisID;("deleteall"==Command?Return=confirm(JS_Lang.Sure_WantDeleteAll):"deleteallcat"==Command&&(Return=confirm(JS_Lang.Sure_WantDeleteCat)),!0===Return&&!1===DontCreateCompactIDs)&&("deleteunmarked"==Command?(GetID=[],GetThisID=0,$('[name^="sm"]',$(this)).each(function(){GetThisID=new RegExp("sm([0-9]{1,})","gi").exec($(this).attr("name"))[1],$('[name="del'+GetThisID+'"]').is(":checked")||GetID.push(GetThisID),$(this).attr("name","")}),$('[name^="del"]:not([name="deletemessages"]), [name="time"]',$(this)).attr("name",""),$(this).prepend('<input type="hidden" name="sm_all" value="'+GetID.join(",")+'"/>')):"deletemarked"==Command?(GetID=[],GetThisID=0,$('[name^="del"][type="checkbox"]',$(this)).each(function(){void 0!==(GetThisID=new RegExp("del([0-9]{1,})","gi").exec($(this).attr("name")))[1]&&$(this).is(":checked")&&GetID.push(GetThisID[1]),$(this).attr("name","")}),$('[name^="sm"], [name="delid"], [name="time"]',$(this)).attr("name",""),$(this).prepend('<input type="hidden" name="del_all" value="'+GetID.join(",")+'"/>')):$('[name^="del"]:not([name="deletemessages"]), [name^="sm"]',$("#msg_form")).attr("name",""));return Return}),!0===SpyExpanded?$(".SpyExpand").children("img").attr("src","images/collapse.png"):$(".SpyExpand").children("img").attr("src","images/expand.png")});