$(document).ready(function(){function addDots(value){value+="";for(var rgx=/(\d+)(\d\d\d)/;rgx.test(value);)value=value.replace(rgx,"$1.$2");return value}function removeNonDigit(Value){return Value=(Value+="").replace(/[^0-9]/g,"")}$.fn.prettyInputBox=function(){return this.each(function(){if(void 0!==AllowPrettyInputBox&&!0===AllowPrettyInputBox){var Value=removeNonDigit($(this).val());Value=addDots(Value),$(this).val(Value)}})},$(".setACS_ID").click(function(){$("[name=getacsdata]").val($(this).val())}),$(".FBeh").tipTip({maxWidth:"250px",delay:0,edgeOffset:8,attribute:"title"}),$(".Speed").tipTip({maxWidth:"250px",delay:0,edgeOffset:8,attribute:"title"}),$(".fInfo").tipTip({maxWidth:"300px",minWidth:"200px",delay:0,edgeOffset:8,attribute:"title"}),$(".planet").tipTip({delay:0,edgeOffset:8,content:JSLang.fl_coordplanet}),$(".moon").tipTip({delay:0,edgeOffset:8,content:JSLang.fl_coordmoon}),$(".debris").tipTip({delay:0,edgeOffset:8,content:JSLang.fl_coorddebris});var CalcStorage=$("#calcStorage");if($('[name^="ship"]').keydown(function(event){var ThisCount;if(38==event.which)ThisCount=parseFloat(removeNonDigit($(this).val())),isNaN(ThisCount)&&(ThisCount=0),$(this).val(ThisCount+1).keyup();else if(40==event.which){if(ThisCount=parseFloat(removeNonDigit($(this).val())),isNaN(ThisCount)||ThisCount<=0)return!1;$(this).val(ThisCount-1).keyup()}}).keyup(function(){var ThisCount=parseInt(removeNonDigit($(this).val()),10),OldCount=$(this).data("oldCount");(void 0===OldCount||isNaN(OldCount))&&(OldCount=0),isNaN(ThisCount)&&(ThisCount=0);var Difference=ThisCount-OldCount;if(0!=Difference){var ThisShipID=removeNonDigit($(this).attr("name")),StorageCalced=parseInt(removeNonDigit(CalcStorage.html()),10);(StorageCalced+=Difference*ShipsData.storage[ThisShipID])>=TotalPlanetResources?CalcStorage.removeClass("orange").addClass("lime"):CalcStorage.removeClass("lime").addClass("orange"),CalcStorage.html(addDots(StorageCalced)),$(this).data("oldCount",ThisCount),ThisCount>ShipsData.count[ThisShipID]?$(this).addClass("red"):$(this).removeClass("red")}$(this).prettyInputBox()}).change(function(){$(this).keyup()}).focus(function(){"0"==$(this).val()&&$(this).val("")}).blur(function(){""==$(this).val()&&$(this).val("0")}),$(".maxShip").click(function(){var GetClass,GetID=$(this).parent().attr("class").split(" ")[0].substr(2);$("#ship"+GetID).val(ShipsData.count[GetID]).keyup()}),$(".noShip").click(function(){var GetClass,GetID=$(this).parent().attr("class").split(" ")[0].substr(2);$("#ship"+GetID).val(0).keyup()}),$(".maxShipAll").click(function(){$(".maxShip").click()}),$(".noShipAll").click(function(){$(".noShip").click()}),$(".addPad2").children(":not(.pad5)").addClass("pad2"),!1!==JSShipSet)for(var ShipID in JSShipSet)$("#ship"+ShipID).val(JSShipSet[ShipID]).keyup();var ACSUsers_Invited=$("#ACSUser_Invited"),ACSUsers_2Invite=$("#ACSUser_2Invite"),ACSUsers_Changed=$('[name="acsuserschanged"]');$("#ACSUserAdd").click(function(){if($("option",ACSUsers_Invited).length<ACSUsersMax+1){var ThisSelected=ACSUsers_2Invite.children("option:selected");ThisSelected.length>0&&(ACSUsers_Invited.append($("<option></option>").attr("value",ThisSelected.val()).text(ThisSelected.text())),ThisSelected.remove(),ACSUsers_Changed.val("1"))}}),$("#ACSUserRmv").click(function(){var ThisSelected=ACSUsers_Invited.children("option:selected");ThisSelected.length>0&&(ThisSelected.is(":disabled")||(ACSUsers_2Invite.append($("<option></option>").attr("value",ThisSelected.val()).text(ThisSelected.text())),ThisSelected.remove(),ACSUsers_Changed.val("1")))}),$("#ACSForm").submit(function(){var UsersString="";ACSUsers_Invited.children("option").each(function(){UsersString+=$(this).val()+","}),$('[name="acs_users"]').val(UsersString)}),$('[name^="ship"]').change()});