$(document).ready(function(){function addDots(value){value+="";for(var rgx=/(\d+)(\d\d\d)/;rgx.test(value);)value=value.replace(rgx,"$1.$2");return value}function removeNonDigit(Value){return Value=(Value+="").replace(/[^0-9]/g,"")}$.fn.prettyInputBox=function(){return this.each(function(){if(void 0!==AllowPrettyInputBox&&!0===AllowPrettyInputBox){var Value=removeNonDigit($(this).val());Value=addDots(Value),$(this).val(Value)}})};var TotalPrice=new Object;TotalPrice.metal=0,TotalPrice.crystal=0,TotalPrice.deuterium=0;var ClickFromMax=!1,ClickFromSelectAll=!1,TotalCount=0;$(".ssDiv").tipTip({delay:100}),$(".infoRes_metal").tipTip({content:JSLang.Metal,defaultPosition:"top",delay:50}),$(".infoRes_crystal").tipTip({content:JSLang.Crystal,defaultPosition:"top",delay:50}),$(".infoRes_deuterium").tipTip({content:JSLang.Deuterium,defaultPosition:"top",delay:50}),$(".ssDiv").hover(function(){$(this).find(".ssImg, .ssBg, .ssLvl").addClass("ssHover")},function(){$(this).find(".ssImg, .ssBg, .ssLvl").removeClass("ssHover")}),$('[id^="ssEl_"]').click(function(){$(this).children("input").focus()}),$("a.buildDo_Gray, a.destroyDo_Gray").click(function(){return!1}),$("#buttonC").click(function(){return $(this).hasClass("construct_Gray")||$("#disassemblerForm").submit(),!1}),$(".maxDo").click(function(){var ThisParent=$(this).parent();if(ThisParent.children(".ssDis").length>0)return!1;ClickFromMax=!0,ThisParent.children(".ssInput").val($(".count",ThisParent).html()).keyup()});var ButtonElement=$("#buttonC");$(".ssInput").click(function(){if($(this).is(":focus"))return!1}).keypress(function(e){var keyCode;13==(e.keyCode?e.keyCode:e.which)&&ButtonElement.click()}).keyup(function(){var ThisCount=parseFloat(removeNonDigit($(this).val()));if(!1===ClickFromSelectAll){var ThisMax=parseFloat(removeNonDigit($(".count",$(this).parent()).html()));ThisCount>ThisMax&&(ThisCount=ThisMax,$(this).val(ThisMax),$(this).prettyInputBox())}var OldCount=$(this).data("oldCount");(void 0===OldCount||isNaN(OldCount))&&(OldCount=0),isNaN(ThisCount)&&(ThisCount=0);var Difference=ThisCount-OldCount;if(0!=Difference){$(this).data("oldCount",ThisCount);var ThisElementID=$(this).attr("name").replace("elem[","").replace("]","");for(var Key in ShipPrices[ThisElementID])TotalPrice[Key]+=ShipPrices[ThisElementID][Key]*Difference;if(TotalCount+=Difference,!1===ClickFromSelectAll){for(var PriceKey in TotalPrice){var ThisSelector;$("#resC_"+PriceKey).html(addDots(TotalPrice[PriceKey]))}TotalCount>0?ButtonElement.hasClass("construct_Gray")&&ButtonElement.removeClass("construct_Gray").addClass("construct_Green"):ButtonElement.hasClass("construct_Green")&&ButtonElement.removeClass("construct_Green").addClass("construct_Gray")}$(this).prettyInputBox()}}).change(function(){$(this).keyup()}).focus(function(){!1===ClickFromMax&&""!=$(this).val()&&$(this).val("").keyup(),ClickFromMax=!1}).keydown(function(event){var ThisCount;if(38==event.which)ThisCount=parseFloat(removeNonDigit($(this).val())),isNaN(ThisCount)&&(ThisCount=0),$(this).val(ThisCount+1).change();else if(40==event.which){if(ThisCount=parseFloat(removeNonDigit($(this).val())),isNaN(ThisCount)||ThisCount<=0)return!1;$(this).val(ThisCount-1).change()}}),$("#cancelReq").click(function(){$(".ssInput").each(function(){$(this).val("").keyup()})}),$("#selAll").click(function(){for(var Key in ClickFromSelectAll=!0,$(".maxDo:not(.inv)").each(function(){$(this).click()}),TotalPrice){var ThisSelector;$("#resC_"+Key).html(addDots(TotalPrice[Key]))}TotalCount>0?ButtonElement.hasClass("construct_Gray")&&ButtonElement.removeClass("construct_Gray").addClass("construct_Green"):ButtonElement.hasClass("construct_Green")&&ButtonElement.removeClass("construct_Green").addClass("construct_Gray"),ClickFromSelectAll=!1}),$(".tabSwitch").hover(function(){$(this).addClass("tabHover")},function(){$(this).removeClass("tabHover")}).click(function(){$(this).hasClass("tabSelect")||($(".tabSwitch").removeClass("tabSelect"),$(this).addClass("tabSelect"),$(".cx").hide(),$("#cx_"+$(this).attr("id").replace("tab_","")).show())}),$("#tab_ships").click()});